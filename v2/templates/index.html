<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Random Image</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <style media="screen">
      @import url('https://fonts.googleapis.com/css?family=Open+Sans:300&display=swap');

      * {
        font-family: 'Open Sans', sans-serif;
        text-align: center;
        color: white;
      }

      html,
      body {
        margin: 0;
      }

      body {
        /*background-image: url("{{ url_for('static', filename='img/body.jpg') }}");*/
        background-image: url("{{ url_for('static', filename='img/b4.jpeg') }}");
        background-position: center;
        background-color: black;
      }

      h1 {
        padding: 16px;
      }

      h3 {
        text-decoration: underline;
        padding: 2px;
        margin-bottom: -50px;
      }

      .head {
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 16px;
        background-color: rgba(0, 0, 120, 0.8);
        border-bottom: 4px solid purple;
        /*background-image: url("{{ url_for('static', filename='img/head.png') }}")*/
      }

      .container {
        width: 40%;
        margin: auto;
        background-color: rgba(0, 83, 100, 0.9);
        padding: 12px;
        border-radius: 16px;
      }

      .container-image {
        max-width: 740px;
        height: 450px;
        margin: auto;
        margin-top: 10%;
      }

      .column {
        display: grid;
        grid-template-columns: 33% 33% 33%;
      }

      .large {
        grid-template-columns: 99%;
      }

      .medium {
        grid-template-columns: 49.5% 49.5%;
      }

      .api-info {
        background-color: rgba(0, 0, 230, 0.5);
        border-radius: 16px;
        padding: 4px;
      }

      .row {
        padding: 8px;
        word-wrap: break-word;
      }

      .nopadding {
        padding: 0px;
        margin: 0;
      }

      .info,
      .header {
        border: 2px solid white;
        border-radius: 18px;
        margin: 4px;
      }

      .header {
        background-color: rgba(0, 0, 139, 0.8);
        font-weight: bold;
      }

      .info {
        background-color: RoyalBlue;
      }

      .btn {
        width: 100%;
        border: 2px solid white;
        padding: 8px;
        margin-bottom: 2%;
        margin-left: -6px;
        color: white;
        background-color: none;
        border-radius: 32px;
        background-color: rgba(255, 255, 255, 0.2);
        transition: background-color 0.5s ease-in;
      }

      .btn:hover {
        cursor: pointer;
        background-color: rgba(20, 0, 200, 0.3);
        transition: background-color 0.5s ease-out;
      }

      .btn:focus {
        outline: none;
      }

      .controll {
        height: 100%;
        width: 100%;
        margin: 0;
      }

      .l {
        width: 100%;
        height: 100%;
        margin: 0;
      }

      #img {
        max-width: 90%;
        max-height: 90%;
        cursor: pointer;
        transition: 1s;
        padding: 4px;
        border: 2px solid white;
        background-color: rgba(20, 0, 200, 0.3);
        border-radius: 16px;
      }

      #img:hover {
        opacity: 0.7;
      }

      /* The Modal (background) */
      .modal {
        display: none;
        /* Hidden by default */
        position: fixed;
        /* Stay in place */
        z-index: 1;
        /* Sit on top */
        padding-top: 100px;
        /* Location of the box */
        left: 0;
        top: 0;
        width: 100%;
        /* Full width */
        height: 100%;
        /* Full height */
        overflow: auto;
        /* Enable scroll if needed */
        background-color: rgb(0, 0, 0);
        /* Fallback color */
        background-color: rgba(0, 0, 0, 0.9);
        /* Black w/ opacity */
      }

      /* Modal Content (Image) */
      .modal-content {
        margin: auto;
        display: block;
        width: 70%;
        max-width: 700px;
        max-height: calc(100vh - 120px);
      }

      /* Caption of Modal Image (Image Text) - Same Width as the Image */
      #caption {
        margin: auto;
        display: block;
        width: 80%;
        max-width: 700px;
        text-align: center;
        color: #ccc;
        padding: 10px 0;
        height: 150px;
      }

      /* Add Animation - Zoom in the Modal */
      .modal-content,
      #caption {
        animation-name: zoom;
        animation-duration: 0.6s;
      }

      @keyframes zoom {
        from {
          transform: scale(0)
        }

        to {
          transform: scale(1)
        }
      }

      /* The Close Button */
      .close {
        position: absolute;
        top: 15px;
        right: 35px;
        color: #f1f1f1;
        font-size: 40px;
        font-weight: bold;
        transition: 0.3s;
      }

      .close:hover,
      .close:focus {
        color: #bbb;
        text-decoration: none;
        cursor: pointer;
      }

      @media only screen and (max-width: 800px) {
        .container {
          width: 95%;
        }
      }
    </style>
  </head>
  <body>
    <div class="head">
      <h1>Random Image API</h1>
    </div>
    <div class="container">
      <div class="api-info">
        <div class="column colored">
          <div class="row header">
            API route
          </div>
          <div class="row header">
            Purpose
          </div>
          <div class="row header">
            Return value
          </div>
        </div>
        <div class="column colored">
          <div class="row info">
            /api/image/random/
          </div>
          <div class="row info">
            Returns a random image
          </div>
          <div class="row info">
            JSON Data/Base64
          </div>
        </div>
        <div class="column">
          <div class="row info">
            /api/image/id/
          </div>
          <div class="row info">
            Returns the image with the id
          </div>
          <div class="row info">
            JSON Data/Base64
          </div>
        </div>
      </div>
      <h3>Total images {{total}}</h3>
      <div class="column large">
        <div class="row nopadding">
          <div class="container-image">
            <img id="img" src="" alt="Random Picture">
          </div>
        </div>
        <div class="column large">
          <div class="row">
            <button class="btn l" type="button" name="button" onclick="loadData('http://127.0.0.1:5000/api/image/random/')">Suprise me</button>
          </div>
        </div>
        <div class="column medium">
          <div class="row">
            <button class="btn controll" type="button" name="button" onclick="newImage(1);">Previous</button>
          </div>
          <div class="row">
            <button class="btn controll" type="button" name="button" onclick="newImage(0);">Next</button>
          </div>
        </div>
      </div>
      <div id="myModal" class="modal">
        <span class="close">&times;</span>
        <img class="modal-content" id="img01">
        <div id="caption"></div>
      </div>
    </div>
    <script type="text/javascript">
      var modal = document.getElementById("myModal");
      var img = document.getElementById("img");
      var modalImg = document.getElementById("img01");
      var captionText = document.getElementById("caption");
      img.onclick = function() {
        modal.style.display = "block";
        modalImg.src = this.src;
        captionText.innerHTML = this.alt;
      }

      function closeModal() {
        modal.style.display = "none";
      }

      function loadImage() {
        var img = document.getElementById("img");
        modalImg.src = img.src;
      }

      var span = document.getElementsByClassName("close")[0];
      span.onclick = function() {
        modal.style.display = "none";
      }

      document.onkeydown = checkKey;

      function checkKey(e) {
        e = e || window.event;
        if (e.keyCode == "37") {
          newImage(1);
          window.setTimeout(function() {
            loadImage();
          }, 100);
        } else if (e.keyCode == "39") {
          newImage(0);
          window.setTimeout(function() {
            loadImage();
          }, 100);
        } else if (e.keyCode == "27") {
          closeModal();
        } else if (e.keyCode == "82") { // Random
          loadData("http://127.0.0.1:5000/api/image/random/");
          window.setTimeout(function() {
            loadImage();
          }, 100);
        }

      }
    </script>
  </body>
</html>
